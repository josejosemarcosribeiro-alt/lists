extends layout

block content
    br
    h3 Add Aula

    form(method="POST", action="/list/add", enctype="multipart/form-data")
        #form-group
            label Title:
            input.form-control(name="title", type="text", required)

        #form-group
            label Upload Aula (optional):
            //- Input hidden que receberá a URL do vídeo enviado
            input(type="hidden", name="video", id="videoInput")
            button.btn.btn-secondary(type="button", id="uploadButton") Upload Vídeo

        #form-group
            label Description (optional):
            textarea.form-control(name="body", rows="3", placeholder="Add a short description about your aula")

        br
        input.btn.btn-primary.float-right(type="submit", value="Submit")

    //- Mensagens de erro ou sucesso
    if errors
        ul.text-danger
            each err in errors
                li= err.msg
    if success
        p.text-success= success

    //- Script Cloudinary Upload Widget
    script.
        const myWidget = cloudinary.createUploadWidget({
            cloudName: 'SEU_CLOUD_NAME', // Substitua pelo seu cloud_name
            uploadPreset: 'SEU_UPLOAD_PRESET', // Substitua pelo preset configurado
            multiple: false,
            resourceType: 'video',
            clientAllowedFormats: ['mp4', 'mov', 'avi']
        }, (error, result) => {
            if (!error && result && result.event === "success") {
                console.log('Upload realizado:', result.info.secure_url);
                document.getElementById('videoInput').value = result.info.secure_url;
            }
        });

        document.getElementById("uploadButton").addEventListener("click", () => {
            myWidget.open();
        });
